//const { expect } = require('chai')
const { spy } = require('sinon')
const proxyquire = require('proxyquire')
const { sequelize, Sequelize } = require('sequelize-test-helpers')

const { DataTypes } = Sequelize;
const UserFactory = proxyquire('../../models/User', {
    sequelize: Sequelize
});

let User

beforeEach(() => {
    User = UserFactory(sequelize);
});

afterEach(() => {
    User.init.resetHistory();
})

test('User model exists, is named correctly and has the correct parameters', () => {
    expect(User.init).toHaveBeenCalledWith(
        {
            firstName: DataTypes.STRING,
            lastName: DataTypes.STRING
          },
          {
            sequelize,
            modelName: 'User'
          }
    )
})